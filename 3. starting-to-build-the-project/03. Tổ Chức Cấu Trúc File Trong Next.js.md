## Tổ Chức Cấu Trúc File Trong Next.js

### Các Phương Pháp Tổ Chức Components

Next.js cung cấp nhiều cách để tổ chức components trong dự án. Việc lựa chọn phương pháp phù hợp sẽ giúp code dễ bảo trì và mở rộng.

### Co-locate Components

**Khái niệm:** Đặt component ngay bên cạnh file page sử dụng nó.

**Cách thực hiện:**

- Nếu component chỉ được sử dụng trong một page cụ thể, có thể đặt nó cùng thư mục với file `page.js`
- Ví dụ: Component `Counter` chỉ dùng trong trang `/cabins` thì có thể đặt trong `app/cabins/counter.js`
- Next.js chỉ render file `page.js`, các file khác không thể truy cập trực tiếp qua URL

**Nhược điểm:**

- Nếu component cần dùng ở nhiều nơi, vẫn phải tạo thư mục components chung
- Thư mục page có thể trở nên lộn xộn khi có nhiều components
- Không nhất quán trong cách tổ chức code

**Kết luận:** Phương pháp này chỉ phù hợp với ứng dụng rất nhỏ.

### Thư Mục Components Chuyên Dụng

**Phương pháp được khuyên dùng:**

- Tạo thư mục `components` riêng để chứa tất cả UI logic có thể tái sử dụng
- Giữ cho cấu trúc project nhất quán và dễ quản lý

**Vấn đề với thư mục components:**

- Next.js mặc định tạo route cho mọi thư mục trong `app`
- Thư mục `components` có thể vô tình tạo route không mong muốn
- Nếu có file `page.js` trong `components`, nội dung sẽ hiển thị tại `/components`


### Private Folders với Underscore

**Giải pháp:** Sử dụng quy ước (convention) của Next.js bằng cách đặt dấu gạch dưới trước tên thư mục.

**Cách thực hiện:**

```
app/
  _components/
    Counter.js
    Header.js
  cabins/
    page.js
```

**Lợi ích:**

- Thư mục `_components` không tạo route
- Truy cập `/components` hoặc `/_components` sẽ trả về lỗi 404
- Các thư mục private tự động sắp xếp lên đầu do bắt đầu bằng underscore
- Bảo mật hơn, tránh lộ nội dung không mong muốn


### Source Folder

**Tùy chọn nâng cao:**

- Tạo thư mục `src` ở root directory
- Đặt cả thư mục `app` và `_components` vào trong `src`

**Khi nào sử dụng:**

- Dự án lớn, phức tạp
- Cần tách biệt rõ ràng giữa source code và các file cấu hình

**Nhược điểm:**

- Thêm một cấp thư mục, có thể không cần thiết với dự án vừa và nhỏ


### Các Thư Mục Bổ Sung

**Thư mục _styles:**

```
app/
  _styles/
    globals.css
```

- Chứa các file CSS toàn cục
- Cũng sử dụng underscore để opt-out khỏi router

**Thư mục _lib (library):**

```
app/
  _lib/
    data-service.js
    helpers.js
```

- Chứa các functions tiện ích, services, helpers
- Không thuộc về components cụ thể nào
- Tên `lib` là quy ước phổ biến, không phải convention của Next.js

**Thư mục public:**

- Chứa static assets như hình ảnh, fonts
- Có thể truy cập trực tiếp từ URL
- Ví dụ: `public/logo.png` → `/logo.png`


### Import Aliases

**Vấn đề với relative imports:**

```javascript
import Header from '../../../_components/Header'
```

- Khó đọc và dễ gây lỗi
- Phức tạp khi cấu trúc thư mục sâu

**Giải pháp với @ alias:**

```javascript
import Header from '@/app/_components/Header'
```

**Cách hoạt động:**

- Ký tự `@` đại diện cho thư mục root
- Next.js tự động hỗ trợ import aliases
- Import từ bất kỳ đâu trong cấu trúc đều dùng cùng cú pháp

**Ví dụ cập nhật import:**

```javascript
// Trước
import Counter from '../_components/Counter'

// Sau
import Counter from '@/app/_components/Counter'
```


### Cấu Trúc Thư Mục Hoàn Chỉnh

```
project-root/
  app/
    _components/
      Counter.js
      Header.js
      Navigation.js
    _lib/
      data-service.js
    _styles/
      globals.css
    cabins/
      page.js
    about/
      page.js
    layout.js
    page.js
  public/
    logo.png
    images/
```


### Lưu Ý Quan Trọng

- Chỉ file `page.js` mới có thể truy cập qua URL
- Các file khác trong thư mục route đều an toàn
- Thư mục bắt đầu với underscore không tạo route
- Import aliases giúp code sạch và dễ bảo trì
- Cấu trúc này phù hợp với dự án vừa và nhỏ


### Tài Liệu Tham Khảo

Next.js documentation có trang riêng về project organization với nhiều phương pháp khác nhau. Nên tham khảo để tìm cách tổ chức phù hợp với dự án cụ thể.

***

**Liên kết:** [[Next.js]], [[Project Structure]], [[Components]], [[Routing]], [[Import Aliases]], [[Private Folders]], [[Single Page Application]], [[Tailwind CSS]]

