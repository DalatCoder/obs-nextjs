## Tối Ưu Hóa Hình Ảnh trong Next.js

### Tầm Quan Trọng của Việc Tối Ưu Hình Ảnh

Hình ảnh là một trong những yếu tố lớn nhất ảnh hưởng đến kích thước trang web (page size) và tốc độ tải. Việc tối ưu hóa hình ảnh là điều cực kỳ quan trọng và cũng là một trong những lợi thế lớn nhất của Next.js framework.

Next.js cung cấp Image component riêng thay thế cho thẻ `<img>` truyền thống của HTML, giúp tự động tối ưu hóa hình ảnh một cách hiệu quả.

### Image Component của Next.js

**Import component:**

```javascript
import Image from 'next/image'
```

**Ba tính năng tối ưu chính:**

- **Tự động phục vụ hình ảnh với kích thước phù hợp:** Tự động chuyển đổi sang định dạng hiện đại như WebP và chỉ thực hiện khi cần thiết (on demand)
- **Ngăn chặn layout shift:** Bắt buộc chỉ định chiều cao (height) và chiều rộng (width) chính xác của hình ảnh
- **Lazy loading tự động:** Chỉ tải hình ảnh khi chúng thực sự xuất hiện trong viewport (khung nhìn), tối ưu hiệu suất mà không cần code thủ công


### Hai Cách Sử dụng Image Component

**Cách 1: Truyền đường dẫn trực tiếp**

Phải chỉ định rõ width và height, nếu không sẽ báo lỗi:

```javascript
<Image 
  src="/logo.png" 
  width={128} 
  height={128} 
  alt="Logo"
/>
```

**Cách 2: Import hình ảnh tĩnh (Static Import)**

Khi import hình ảnh như một module, Next.js sẽ phân tích hình ảnh trước, do đó không bắt buộc phải chỉ định width/height:

```javascript
import logo from '@/public/logo.png'

<Image 
  src={logo} 
  width={128} 
  height={128} 
  quality={100}
  alt="Logo"
/>
```


### Thuộc Tính Quality

Với static import, có thể điều chỉnh chất lượng hình ảnh thông qua prop `quality`:

- `quality={10}` - chất lượng thấp, kích thước nhỏ (khoảng 2KB)
- `quality={90}` - chất lượng cao hơn, kích thước lớn hơn
- `quality={100}` - chất lượng tối đa (ví dụ: 8.5KB)

**Lợi ích:** Không cần sử dụng công cụ bên ngoài để tối ưu hoặc resize hình ảnh, tất cả được thực hiện tự động ngay trong code.

### Kết Quả Tối Ưu

Khi sử dụng Image component, Next.js tự động:

- Tạo thuộc tính `srcset` với nhiều kích thước khác nhau cho responsive design
- Thêm thuộc tính `loading="lazy"` cho lazy loading
- Thêm các thuộc tính tối ưu khác như `decoding`
- Tối ưu định dạng hình ảnh (WebP, v.v.)


### Ghi Chú Thêm

- API của Image component khá phức tạp với nhiều options khác nhau
- Hai cách trên là những cách cơ bản và dễ sử dụng nhất
- Việc tối ưu hình ảnh trong Next.js mang lại lợi ích lớn mà không tốn công sức xử lý thủ công

**Liên kết:** [[Next.js]], [[Image Component]], [[Image Optimization]], [[Lazy Loading]], [[WebP]], [[Layout Shift]], [[Responsive Design]], [[Static Import]]

