## Thiết lập Storage Buckets trong Supabase

### Tạo Storage Bucket

Để lưu trữ các file lớn trong [[Supabase]], cần thiết lập các storage bucket (thùng lưu trữ) riêng biệt:

- Truy cập menu Storage trong dashboard [[Supabase]]
- Tạo bucket mới cho từng loại file (avatars, cabin images)
- Chọn chế độ **Public** để cho phép đọc URL của các file trong bucket
- Lưu ý: [[Row Level Security]] (RLS - Bảo mật cấp hàng) vẫn được áp dụng cho các thao tác như upload hoặc xóa file


### Upload File vào Bucket

Có thể upload file bằng cách kéo thả (drag and drop) trực tiếp vào bucket:

- Chọn bucket đã tạo
- Kéo thả file từ máy tính vào giao diện
- Hệ thống tự động upload và lưu trữ


### Lấy URL của File đã Upload

Sau khi upload thành công, có thể lấy URL công khai của file:

- Click chuột phải vào file
- Chọn "Get URL" để copy đường dẫn
- Sử dụng URL này để hiển thị file trong ứng dụng

```jsx
<img src="[URL từ Supabase Storage]" />
```


### Cập nhật URL vào Database

Lưu URL của file vào bảng dữ liệu để quản lý:

- Mở Table Editor trong [[Supabase]]
- Tìm record cần cập nhật (ví dụ: bảng cabins)
- Double click vào ô cần chỉnh sửa và paste URL
- Lưu thay đổi


### Upload File theo Code

Trong các bài học sau sẽ học cách upload file programmatically (lập trình) vào bucket thay vì upload thủ công qua giao diện.

### Ghi chú thêm

- Hình ảnh cabin trong khóa học được tạo bằng [[Midjourney]] (phiên bản 4)
- Storage bucket công khai không ảnh hưởng đến bảo mật vì [[RLS]] vẫn kiểm soát các thao tác thêm/xóa
- Sau khi thiết lập storage, bước tiếp theo là quản lý state với [[React Query]]

**Liên kết:** [[Supabase]], [[Storage Bucket]], [[Row Level Security]], [[React Query]], [[Midjourney]]

