## Navigation giữa các Pages

### Vấn đề với Anchor Element thông thường

Khi sử dụng thẻ `<a>` HTML thông thường để điều hướng, ứng dụng sẽ thực hiện full page reload (tải lại toàn bộ trang):

```javascript
export default function Page() {
  return (
    <div>
      <h1>The Wild Oasis. Welcome to paradise</h1>
      <a href="/cabins">Explore luxury cabins</a>
    </div>
  );
}
```

Mỗi lần click vào link, trình duyệt sẽ tải lại toàn bộ ứng dụng - điều này không mong muốn vì làm mất đi trải nghiệm Single Page Application (SPA).

### Link Component của Next.js

Next.js cung cấp Link component để giải quyết vấn đề này. Thay vì full reload, Link component cho phép navigation mượt mà giữa các trang:

```javascript
import Link from 'next/link';

export default function Page() {
  return (
    <div>
      <h1>The Wild Oasis. Welcome to paradise</h1>
      <Link href="/cabins">Explore luxury cabins</Link>
    </div>
  );
}
```

Link component sử dụng prop `href` (giống HTML anchor element), khác với React Router sử dụng prop `to`.

### Các tối ưu hóa của Link Component

Link component cung cấp nhiều optimization techniques (kỹ thuật tối ưu hóa) tự động:

- **Prefetching:** Tự động prefetch (tải trước) tất cả routes được link trên trang (chỉ hoạt động trong production mode, không phải development)
- **Code Splitting:** Mỗi page được download riêng biệt như một chunk (khối) riêng, cải thiện performance
- **Browser Caching:** Mỗi page đã visit (truy cập) được cache (lưu tạm) trong browser, không cần refetch khi quay lại

Những tính năng này hoạt động out of the box (ngay lập tức) mà không cần cấu hình thêm.

### Programmatic Navigation

Next.js cũng cung cấp React hooks cho programmatic navigation (điều hướng lập trình), tương tự React Router. Tuy nhiên, các hooks này không hoạt động trong page components vì chúng là Server Components, và React hooks không hoạt động trên server.

### Tạo Navigation Component

Để tái sử dụng navigation trên nhiều pages, tạo một component riêng:

```javascript
// app/components/Navigation.js
import Link from 'next/link';

export default function Navigation() {
  return (
    <ul>
      <li>
        <Link href="/">Home</Link>
      </li>
      <li>
        <Link href="/cabins">Cabins</Link>
      </li>
      <li>
        <Link href="/about">About</Link>
      </li>
      <li>
        <Link href="/account">Your account</Link>
      </li>
    </ul>
  );
}
```

Sau đó import và sử dụng trong các pages:

```javascript
import Navigation from '@/components/Navigation';

export default function Page() {
  return (
    <div>
      <Navigation />
      <h1>Page content here</h1>
    </div>
  );
}
```


### Lưu ý về Components Folder

Khi tạo folder `components/` trong thư mục `app/`, Next.js sẽ coi đó là một route mới (`/components`). Tuy nhiên, route này sẽ không hoạt động nếu không có file `page.js` bên trong. Đây không phải là vấn đề lớn, nhưng có thể tối ưu hơn với project architecture tốt hơn (sẽ học sau).

### Browser Caching trong Development

Khi phát triển, có thể thấy hiện tượng caching: sau khi cập nhật code, trang vẫn hiển thị nội dung cũ trong vài giây. Đây là kết quả của Next.js caching các pages trong browser. Cần reload trang để thấy thay đổi mới nhất.

### Vấn đề với việc lặp lại Navigation

Việc thêm Navigation component vào mọi page một cách thủ công không tối ưu. Giải pháp tốt hơn là sử dụng Layouts - một convention file khác của Next.js cho phép tạo reusable layout (bố cục tái sử dụng) cho nhiều pages.

### So sánh với React Router

Điểm tương đồng:

- Cả hai đều có Link component để navigation
- Cả hai đều có programmatic navigation hooks

Điểm khác biệt:

- Next.js Link sử dụng `href`, React Router Link sử dụng `to`
- Next.js Link có built-in optimizations (prefetching, caching, code splitting)
- Next.js Link hoạt động với server-side rendering

**Liên kết:** [[Link Component]], [[Navigation]], [[Server Components]], [[Prefetching]], [[Code Splitting]], [[Browser Caching]], [[Single Page Application]], [[Full Page Reload]], [[React Router]], [[Layouts]]

