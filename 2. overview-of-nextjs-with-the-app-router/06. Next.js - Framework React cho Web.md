## Next.js - Framework React cho Web

Next.js là một meta-framework (framework siêu cấp) được xây dựng trên nền tảng React. Thuật ngữ "meta" được sử dụng vì Next.js là một framework được xây dựng trên một framework khác (React). Xu hướng này đang trở nên phổ biến trong phát triển web hiện đại, tương tự như SvelteKit cho Svelte.

### Đặc điểm cốt lõi

Next.js cho phép sử dụng tất cả các tính năng React quen thuộc như components (thành phần), props, React hooks. Điểm khác biệt là framework này bổ sung các quy ước và phương pháp tốt nhất cho những tác vụ thường gặp trong ứng dụng thực tế như routing (định tuyến), data fetching (lấy dữ liệu) và nhiều chức năng khác.

Next.js là một opinionated framework (framework có quan điểm riêng), nghĩa là các quy ước được thiết lập sẵn bởi đội ngũ kỹ sư tại Vercel. Điều này giúp giảm thiểu code boilerplate (mã lặp lại không cần thiết) và tăng tốc độ phát triển ứng dụng.

### Bốn thành phần chính của Next.js

- **Server-Side Rendering (Kết xuất phía máy chủ):** Hỗ trợ cả dynamic rendering (kết xuất động) và static rendering (kết xuất tĩnh), có thể lựa chọn cho từng route
- **File-based Router (Bộ định tuyến dựa trên file):** Routes được định nghĩa hoàn toàn dựa trên cấu trúc file hệ thống. Tạo route mới chỉ cần tạo folder với tên route mà không cần viết code
- **Data Fetching và Mutations trên Server:** Sử dụng React Server Components và Server Actions để fetch và thay đổi dữ liệu trực tiếp từ server
- **Optimization Techniques (Kỹ thuật tối ưu hóa):** Bao gồm automatic route preloading (tải trước route tự động), image optimization (tối ưu hình ảnh), font optimization (tối ưu font) và SEO tools


### App Router vs Pages Router

Next.js cung cấp hai loại router khác nhau, gần như là hai framework riêng biệt:

**App Router (Router hiện đại):**

- Trở thành stable (ổn định) vào năm 2023 trong phiên bản 13.4
- Được khuyến nghị cho các dự án mới
- Hỗ trợ React Server Components, Server Actions, Suspense, Streaming
- Dễ dàng triển khai layouts, error boundaries, loading states
- Hỗ trợ các routing patterns nâng cao như parallel routing và intercepting routes
- Sử dụng hàm fetch tiêu chuẩn để lấy dữ liệu trong bất kỳ server component nào
- Nhược điểm: Aggressive caching (bộ nhớ đệm tích cực) gây khó hiểu và đôi khi không mong muốn; learning curve (đường cong học tập) dốc hơn

**Pages Router (Router cũ):**

- Tồn tại từ phiên bản đầu tiên năm 2016
- Được gọi là legacy router (router kế thừa) nhưng vẫn được maintain (bảo trì) trong tương lai
- Đơn giản và dễ học hơn
- Nhược điểm: Khó khăn trong việc xây dựng application-wide layouts; phải sử dụng các API đặc thù của Next.js như getStaticProps và getServerSideProps; chỉ fetch dữ liệu ở page level, không phải component level


### Tại sao chọn App Router

App Router triển khai full-stack architecture vision (tầm nhìn kiến trúc full-stack) của React team, bao gồm các tính năng React tiên tiến nhất. Mặc dù có learning curve cao hơn, nhưng mang lại developer experience (trải nghiệm nhà phát triển) và user experience (trải nghiệm người dùng) tốt hơn đáng kể, đặc biệt nhờ Server Components.

**Liên kết:** [[Next.js]], [[Server-Side Rendering]], [[React Server Components]], [[Server Actions]], [[App Router]], [[Pages Router]], [[File-based Routing]], [[Data Fetching]], [[Meta-framework]]
